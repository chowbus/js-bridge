<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>NativeBridge CDN Test</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
    }
    button {
      margin: 5px;
      padding: 10px 20px;
      font-size: 14px;
      cursor: pointer;
    }
    #result {
      margin-top: 20px;
      padding: 15px;
      border: 1px solid #ccc;
      border-radius: 4px;
      background: #f5f5f5;
    }
    pre {
      background: white;
      padding: 10px;
      border-radius: 4px;
      max-height: 400px;
      overflow-y: auto;
    }
  </style>
</head>
<body>
  <h1>ğŸŒ‰ NativeBridge CDN Test</h1>
  <p>è¿™ä¸ªé¡µé¢é€šè¿‡ CDN åŠ è½½ js-bridge</p>
  
  <div>
    <button onclick="testCall()">æµ‹è¯• Call</button>
    <button onclick="testSend()">æµ‹è¯• Send</button>
    <button onclick="testOn()">æµ‹è¯• On</button>
    <button onclick="testPlatform()">æµ‹è¯• Platform</button>
    <button onclick="testLog()">åˆ‡æ¢æ—¥å¿—</button>
    <button onclick="clearLog()">æ¸…ç©ºæ—¥å¿—</button>
  </div>
  
  <div id="result">
    <h3>è¿è¡Œç»“æœï¼š</h3>
    <pre id="output"></pre>
  </div>

  <!-- ä» CDN åŠ è½½ NativeBridge -->
  <!-- æ–¹å¼1: ä½¿ç”¨ jsDelivr (æ¨è) -->
  <script src="https://cdn.jsdelivr.net/gh/chowbus/js-bridge@latest/dist/native-bridge.min.js"></script>
  
  <!-- æ–¹å¼2: å¦‚æœå‘å¸ƒåˆ° npmï¼Œå¯ä»¥ä½¿ç”¨ -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/@chowbus/native-bridge@latest/dist/native-bridge.min.js"></script> -->
  
  <!-- æ–¹å¼3: å¦‚æœå¯ç”¨äº† GitHub Pages -->
  <!-- <script src="https://chowbus.github.io/js-bridge/dist/native-bridge.min.js"></script> -->
  
  <script>
    function log(message) {
      const output = document.getElementById('output');
      const timestamp = new Date().toLocaleTimeString();
      output.textContent = `[${timestamp}] ${message}\n` + output.textContent;
    }

    function clearLog() {
      document.getElementById('output').textContent = '';
    }

    async function testCall() {
      try {
        log('ğŸ”µ æµ‹è¯• call æ–¹æ³•...');
        const result = await NativeBridge.call('testMethod', { 
          param: 'value',
          timestamp: Date.now()
        });
        log('âœ… Call æˆåŠŸ: ' + JSON.stringify(result, null, 2));
      } catch (error) {
        log('âŒ Call å¤±è´¥: ' + error.message);
      }
    }

    function testSend() {
      log('ğŸ”µ æµ‹è¯• send æ–¹æ³•...');
      NativeBridge.send('testSend', { 
        data: 'test data',
        timestamp: Date.now()
      });
      log('âœ… Send å·²å‘é€');
    }

    function testOn() {
      log('ğŸ”µ æµ‹è¯• on æ–¹æ³•...');
      NativeBridge.on('testEvent', (data) => {
        log('ğŸ“¨ æ”¶åˆ°äº‹ä»¶: ' + JSON.stringify(data, null, 2));
      });
      log('âœ… å¼€å§‹ç›‘å¬ testEvent');
    }

    function testPlatform() {
      const platform = NativeBridge.getPlatform();
      log('ğŸ“± å¹³å°ä¿¡æ¯:\n' + JSON.stringify(platform, null, 2));
      log('ğŸ” æ˜¯å¦åŸç”Ÿç¯å¢ƒ: ' + NativeBridge.isNative());
    }

    let logEnabled = true;
    function testLog() {
      logEnabled = !logEnabled;
      NativeBridge.setLogEnabled(logEnabled);
      log('ğŸ“ æ—¥å¿—å·²' + (logEnabled ? 'å¯ç”¨' : 'ç¦ç”¨'));
    }

    // åˆå§‹åŒ–
    window.addEventListener('DOMContentLoaded', () => {
      log('âœ… NativeBridge ä» CDN åŠ è½½æˆåŠŸ');
      log('ğŸ“± å½“å‰å¹³å°: ' + NativeBridge.getPlatform().type);
      log('ğŸ” æ˜¯å¦åŸç”Ÿç¯å¢ƒ: ' + NativeBridge.isNative());
      
      // æ˜¾ç¤ºåŠ è½½çš„è„šæœ¬æ¥æº
      const scripts = document.querySelectorAll('script[src*="native-bridge"]');
      scripts.forEach(script => {
        if (script.src) {
          log('ğŸ“¦ åŠ è½½æ¥æº: ' + script.src);
        }
      });
    });
  </script>
</body>
</html>

